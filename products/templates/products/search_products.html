{% extends "base_generic.html" %}
{% load verbose_names %}
{% load field_values %}

{% block content %}
    <h1>Search products</h1>
    {{ test }}
    <form action='' method="get">
        <table>
            {{ form.as_table }}
        </table>
        <input type="submit" value="Submit">
        <input type="hidden" name="form_test" value="True">
    </form>


    {% if queryset %}
        <table>
            <tbody>
            <tr>
                {% for field in model.get_all_table_fields %}
                    <th>
                        {% get_verbose_field_name model field %}
                    </th>
                {% endfor %}
                <th>Bulk discount</th>
                <th>Lowest price</th>
                <th>Product link</th>
                <th>Like/unlike</th>

            </tr>
            {% for object in queryset %}
                <tr>
                    {% for field in model.get_all_table_fields %}
                        <td>{% get_field_value object field %}</td>
                    {% endfor %}
                    <td> {{ object.display_tierprices }} </td>
                    <td> {{ object.lowest_price }}</td>
                    <td><a href="{{ object.url }}">Go to</a></td>
                    <td>{% include 'products/like_unlike_product_form.html' %}</td>
                </tr>
                <tr>
                    {%  get_dimensions_match object search_width search_length search_height as all_matches %}
                    {% for match in all_matches %}
                        <td>{{ match }}%</td>
                    {% endfor %}
                </tr>
            {% endfor %}
            </tbody>
        </table>
    {% endif %}
{% endblock %}